{"version":3,"file":"typed-conversions.min.js","sources":["../lib/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hashToArray(hashObj, __key__ = \"id\") {\n    if (hashObj && typeof hashObj !== \"object\") {\n        throw new Error(\"Cant convert hash-to-array because hash was not passed in: \" + hashObj);\n    }\n    const hash = Object.assign({}, hashObj);\n    const results = [];\n    Object.keys(hash).forEach(key => {\n        const newProps = typeof hash[key] === \"object\" ? hash[key] : { value: hash[key] };\n        const obj = Object.assign({}, newProps);\n        obj[__key__] = key;\n        results.push(obj);\n    });\n    return results;\n}\nexports.hashToArray = hashToArray;\nfunction flatten(list) {\n    return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\nexports.flatten = flatten;\nfunction arrayToHash(list, __key__ = \"id\") {\n    if (!Array.isArray(list)) {\n        throw new Error(`arrayToHash: input was not an array!`);\n    }\n    return list.reduce((acc, record) => {\n        const recordNoId = Object.assign({}, record);\n        delete recordNoId[__key__];\n        return Object.keys(recordNoId).length === 1 && recordNoId.value\n            ? Object.assign({}, acc, { [record[__key__]]: recordNoId.value }) : Object.assign({}, acc, { [record[__key__]]: recordNoId });\n    }, new Object());\n}\nexports.arrayToHash = arrayToHash;\nfunction snapshotToArray(snap, idProp = \"id\") {\n    const hash = snap.val() || {};\n    return hashToArray(hash, idProp);\n}\nexports.snapshotToArray = snapshotToArray;\nfunction snapshotToHash(snap, idProp = \"id\") {\n    const hash = snap.val() || {};\n    Object.keys(hash).forEach(key => typeof hash[key] === \"object\"\n        ? (hash[key][idProp] = key)\n        : (hash[key] = { [idProp]: key, value: hash[key] }));\n    return hash;\n}\nexports.snapshotToHash = snapshotToHash;\nfunction snapshotToOrderedArray(snap, idProp = \"id\") {\n    const output = [];\n    snap.forEach((child) => {\n        const obj = child.val();\n        const key = child.key;\n        if (typeof obj !== \"object\") {\n            throw new Error(`Can't create a list from scalar values: \"${obj}\" | \"${key}\"`);\n        }\n        output.push(Object.assign({ [idProp]: key }, obj));\n        return true;\n    });\n    return output;\n}\nexports.snapshotToOrderedArray = snapshotToOrderedArray;\nfunction snapshotToOrderedHash(snap, idProp = \"id\") {\n    const orderedArray = this.snapshotToOrderedArray(snap, idProp);\n    return this.arrayToHash(orderedArray);\n}\nexports.snapshotToOrderedHash = snapshotToOrderedHash;\n//# sourceMappingURL=index.js.map"],"names":["hashToArray","hashObj","__key__","_typeof","Error","hash","Object","assign","results","keys","forEach","newProps","key","obj","push","defineProperty","exports","flatten","list","reduce","a","b","concat","Array","isArray","arrayToHash","acc","record","recordNoId","length","value","snapshotToArray","snap","idProp","val","snapshotToHash","snapshotToOrderedArray","output","child","snapshotToOrderedHash","orderedArray","this"],"mappings":"ofAEA,SAASA,EAAYC,OAASC,yDAAU,QAChCD,GAA8B,WAAnBE,EAAOF,SACZ,IAAIG,MAAM,8DAAgEH,OAE9EI,EAAOC,OAAOC,UAAWN,GACzBO,mBACCC,KAAKJ,GAAMK,QAAQ,gBAChBC,EAAgC,WAArBR,EAAOE,EAAKO,IAAoBP,EAAKO,UAAgBP,EAAKO,IACrEC,EAAMP,OAAOC,UAAWI,KAC1BT,GAAWU,IACPE,KAAKD,KAEVL,EAbXF,OAAOS,eAAeC,QAAS,qBAAuB,IAetDA,QAAQhB,YAAcA,EAItBgB,QAAQC,QAHR,SAASA,EAAQC,UACNA,EAAKC,OAAO,SAACC,EAAGC,UAAMD,EAAEE,OAAOC,MAAMC,QAAQH,GAAKJ,EAAQI,GAAKA,SAc1EL,QAAQS,YAXR,SAAqBP,OAAMhB,yDAAU,SAC5BqB,MAAMC,QAAQN,SACT,IAAId,qDAEPc,EAAKC,OAAO,SAACO,EAAKC,OACfC,EAAatB,OAAOC,UAAWoB,iBAC9BC,EAAW1B,GACwB,IAAnCI,OAAOG,KAAKmB,GAAYC,QAAgBD,EAAWE,MACpDxB,OAAOC,UAAWmB,OAAQC,EAAOzB,GAAW0B,EAAWE,QAAWxB,OAAOC,UAAWmB,OAAQC,EAAOzB,GAAW0B,KACrH,IAAItB,SAOXU,QAAQe,gBAJR,SAAyBC,OAAMC,yDAAS,YAE7BjC,EADMgC,EAAKE,UACOD,IAU7BjB,QAAQmB,eAPR,SAAwBH,OAAMC,yDAAS,KAC7B5B,EAAO2B,EAAKE,wBACXzB,KAAKJ,GAAMK,QAAQ,wBAA4B,WAArBP,EAAOE,EAAKO,IACtCP,EAAKO,GAAKqB,GAAUrB,EACpBP,EAAKO,WAAUqB,EAASrB,eAAYP,EAAKO,SACzCP,GAgBXW,QAAQoB,uBAbR,SAAgCJ,OAAMC,yDAAS,KACrCI,cACD3B,QAAQ,SAAC4B,OACJzB,EAAMyB,EAAMJ,MACZtB,EAAM0B,EAAM1B,OACC,WAAfT,EAAOU,SACD,IAAIT,0DAAkDS,kBAAWD,iBAEpEE,KAAKR,OAAOC,YAAU0B,EAASrB,GAAOC,KACtC,IAEJwB,GAOXrB,QAAQuB,sBAJR,SAA+BP,OAAMC,yDAAS,KACpCO,EAAeC,KAAKL,uBAAuBJ,EAAMC,UAChDQ,KAAKhB,YAAYe"}